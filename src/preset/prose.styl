// (C)opyright 2020-11-17 Dirk Holtwick, holtwick.it. All rights reserved.
@require "../mixins/utils.styl"
@require "../mixins/colors.styl"
@require "../mixins/base.styl"
@require "../mixins/text.styl"
@require "tailwind.styl"

spacing = px(16)
tablePadding = px(8)

tw-prose()
  tw-reset-border()
  tw-reset-form()
  tw-reset-media()
  tw-reset-monospace()

  h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6
    color inherit
    font-weight medium
    line-height 1.2
    margin-bottom spacing
    margin-top spacing
    font-weight medium

  h1, .h1
    font-size 2rem

  h2, .h2
    font-size 1.6rem

  h3, .h3
    font-size 1.4rem

  h4, .h4
    font-size 1.2rem

  h5, .h5
    font-size 1rem

  h6, .h6
    font-size 0.8rem

  // Paragraphs
  p, .p, ol, ul
    margin-y spacing

  // Semantic text elements
  a, ins, u
    text-decoration-skip ink edges

  a
    color var(--link-color, -blue-700)

    &:hover
      color var(--link-hover-color, var(--alt-color, -blue-800))

    &:active
      color var(--link-active-color, var(--link-color, -blue-600))

  abbr[title]
    border-bottom $border-width dotted
    cursor help
    text-decoration none

  kbd, tt
    color var(--code-foreground)
    background var(--code-background, var(--secondary-background))
    // font-size: $font-size-sm;
    padding-top 0
    padding-right px(2)
    padding-left px(2)
    padding-bottom px(1)
    border-radius px(2)

  b, strong
    font-weight semibold

  i, em
    font-style italic

  mark
    color var(--highlight-foreground)
    background var(--highlight-background, yellow)
    padding-top 0
    padding-right px(2)
    padding-left px(2)
    padding-bottom px(1)
    border-radius px(2)

  // Blockquote
  blockquote
    border-left px(2) solid red
    padding-left spacing

  // Lists
  ul, ol
    list-style-position outside
    margin-left px(32)
    padding 0

    li
      margin-top 0

  ul
    list-style disc

  ul ul
    list-style-type circle

  ol
    list-style decimal

  ol ol
    list-style-type lower-alpha

  dl dt
    font-weight bold

  dl dd
    // margin $unit-2 0 $unit-4 0

  :first-child
    margin-top 0

  :last-child
    margin-bottom 0

  img, video, figure
    display block
    margin-y spacing

    & > *
      margin-y 0

  th, td
    border-bottom-width 1px
    border-bottom-color -gray-200

    &:first-child
      padding-left 0

    &:last-child
      padding-right 0

  tr
    &:last-child
      border-bottom-width 0

    th
      font-weight 600
      vertical-align bottom
      padding-right $tablePadding
      padding-bottom $tablePadding
      padding-left $tablePadding
      border-bottom-color -gray-400

    td
      vertical-align top
      padding-top $tablePadding
      padding-right $tablePadding
      padding-bottom $tablePadding
      padding-left $tablePadding

.prose2
  // max-width 65ch
  line-height 1.75

  [class~=lead]
    font-size 1.25em
    line-height 1.6
    margin-y 1.2em

  a[href]
    color inherit
    text-decoration underline

  h1, h2, h3, h4
    a[href]
      color inherit
      text-decoration none

  strong, b
    font-weight 600

  em, i
    font-style italic

  hr
    border-color #e2e8f0
    border-top-width 1px
    margin-top 3em
    margin-bottom 3em

  blockquote
    font-weight 500
    font-style italic
    color #1a202c
    border-left-width 0.25rem
    border-left-color #e2e8f0
    quotes "\201C" "\201D" "\2018" "\2019"
    margin-top 1.6em
    margin-bottom 1.6em
    padding-left 1em

    p
      &:first-of-type
        &::before
          content open-quote

      &:last-of-type
        &::after
          content close-quote

  h1
    // color #1a202c
    font-weight 800
    font-size 2.25em
    margin-top 0
    margin-bottom 0.8888889em
    line-height 1.1111111

  h2
    // color #1a202c
    font-weight 700
    font-size 1.5em
    margin-top 2em
    margin-bottom 1em
    line-height 1.3333333

  h3
    // color #1a202c
    font-weight 600
    font-size 1.25em
    margin-top 1.6em
    margin-bottom 0.6em
    line-height 1.6

  h4
    // color #1a202c
    font-weight 600
    margin-top 1.5em
    margin-bottom 0.5em
    line-height 1.5

  figure figcaption
    // color #718096
    font-size 0.875em
    line-height 1.4285714
    margin-top 0.8571429em

  code
    &::before
      content "`"

    &::after
      content "`"

  pre
    color #e2e8f0
    background-color #2d3748
    overflow-x auto
    font-size 0.875em
    line-height 1.7142857
    margin-top 1.7142857em
    margin-bottom 1.7142857em
    border-radius 0.375rem
    padding-top 0.8571429em
    padding-right 1.1428571em
    padding-bottom 0.8571429em
    padding-left 1.1428571em

    code
      background-color transparent
      border-width 0
      border-radius 0
      padding 0
      font-weight 400
      color inherit
      font-size inherit
      font-family inherit
      line-height inherit

      &::before
        content ""

      &::after
        content ""

  table
    width 100%
    table-layout auto
    text-align left
    margin-top 2em
    margin-bottom 2em
    font-size 0.875em
    line-height 1.7142857

  th, td
    border-bottom-width 1px
    border-bottom-color -gray-200

    &:first-child
      padding-left 0

    &:last-child
      padding-right 0

  tr
    &:last-child
      border-bottom-width 0

    th
      font-weight 600
      vertical-align bottom
      padding-right tablePadding
      padding-bottom tablePadding
      padding-left tablePadding
      border-bottom-color -gray-400

    td
      vertical-align top
      padding-top tablePadding
      padding-right tablePadding
      padding-bottom tablePadding
      padding-left tablePadding

tw-prose-float()
  max-width 65ch
  line-height px(24)

  tw-prose()